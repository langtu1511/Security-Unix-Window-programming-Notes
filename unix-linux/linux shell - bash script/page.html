<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Shell</title>
</head><body><br/>
<br/>
<br/>
<b><span style="font-size: 12pt">File Redirection</span></b><br/>
<ul><li style="list-style-type: none"><tt>&gt; file</tt>&#09;&#09;Create file</li>
<li style="list-style-type: none"><tt>&gt;&gt; file</tt>&#09;&#09;Append to file</li>
<li style="list-style-type: none"><tt>&lt; file</tt>&#09;&#09;Read from file</li>
<li style="list-style-type: none"><tt>a | b</tt>&#09;&#09;Pipe a as input to b</li>
<li style="list-style-type: none"></li>
</ul>
<b><span style="font-size: 12pt">Common Constructs</span></b><br/>
<ul><li style="list-style-type: none"><b><i>Read text file line by line</i></b></li>
<li style="list-style-type: none"></li>
<li style="list-style-type: none"><ul><tt><span style="color: #00007f"><li style="list-style-type: none">while read f</li>
<li style="list-style-type: none">do</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none">echo "line is $f"</li>
</ul>
</li>
</span></tt><li style="list-style-type: none"><tt><span style="color: #00007f">done &lt; file</span></tt></li>
<li style="list-style-type: none"></li>
</ul>
</li>
<li style="list-style-type: none"><b><i>case</i></b>&nbsp;</li>
</ul>
<ul><li style="list-style-type: none"><ul><tt><span style="color: #00007f"><li style="list-style-type: none">case $foo in</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none">a)</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none">echo "foo is A";;</li>
</ul>
</li>
<li style="list-style-type: none">b)</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none">echo "foo is B";;</li>
</ul>
</li>
<li style="list-style-type: none">*)</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none">echo "foo is default";;</li>
</ul>
</li>
</ul>
</li>
</span></tt><li style="list-style-type: none"><tt><span style="color: #00007f">esac</span></tt></li>
</ul>
</li>
</ul>
<ul><li style="list-style-type: none"><b><i>While loop</i></b></li>
<li style="list-style-type: none"></li>
<li style="list-style-type: none"><ul><tt><span style="color: #00007f"><li style="list-style-type: none">a=0</li>
<li style="list-style-type: none">while [ "$a" -lt 10 ] &nbsp; &nbsp;# this is loop1</li>
<li style="list-style-type: none">do</li>
<li style="list-style-type: none">&nbsp; &nbsp;b="$a"</li>
<li style="list-style-type: none">&nbsp; &nbsp;while [ "$b" -ge 0 ] &nbsp;# this is loop2</li>
<li style="list-style-type: none">&nbsp; &nbsp;do</li>
<li style="list-style-type: none">&nbsp; &nbsp; &nbsp; echo -n "$b "</li>
<li style="list-style-type: none">&nbsp; &nbsp; &nbsp; b=`expr $b - 1`</li>
<li style="list-style-type: none">&nbsp; &nbsp;done</li>
<li style="list-style-type: none">&nbsp; &nbsp;echo</li>
<li style="list-style-type: none">&nbsp; &nbsp;a=`expr $a + 1`</li>
</span></tt><li style="list-style-type: none"><tt><span style="color: #00007f">done</span></tt></li>
</ul>
</li>
</ul>
<ul><li style="list-style-type: none"><b>For loop</b></li>
<li style="list-style-type: none"></li>
<li style="list-style-type: none"><ul><tt><span style="color: #00007f"><li style="list-style-type: none">for var in 0 1 2 3 4 5 6 7 8 9</li>
<li style="list-style-type: none">do</li>
<li style="list-style-type: none">&nbsp; &nbsp;echo $var</li>
<li style="list-style-type: none">done</li>
</span></tt><li style="list-style-type: none"></li>
<li style="list-style-type: none">----</li>
<li style="list-style-type: none"></li>
<tt><span style="color: #00007f"><li style="list-style-type: none">for FILE in $HOME/.bash*</li>
<li style="list-style-type: none">do</li>
<li style="list-style-type: none">&nbsp; &nbsp;echo $FILE</li>
</span></tt><li style="list-style-type: none"><tt><span style="color: #00007f">done</span></tt></li>
</ul>
</li>
</ul>
<ul><li style="list-style-type: none"><b>Until loop</b></li>
<li style="list-style-type: none"></li>
<li style="list-style-type: none"><ul><tt><span style="color: #00007f"><li style="list-style-type: none">a=0</li>
<li style="list-style-type: none"></li>
<li style="list-style-type: none">until [ ! $a -lt 10 ]</li>
<li style="list-style-type: none">do</li>
<li style="list-style-type: none">&nbsp; &nbsp;echo $a</li>
<li style="list-style-type: none">&nbsp; &nbsp;a=`expr $a + 1`</li>
</span></tt><li style="list-style-type: none"><tt><span style="color: #00007f">done</span></tt></li>
</ul>
</li>
</ul>
<ul><li style="list-style-type: none"><b>Select loop</b></li>
<li style="list-style-type: none"></li>
<li style="list-style-type: none">The select loop provides an easy way to create a numbered menu from which users can select options. It is useful when you need to ask the user to choose one or more items from a list of choices.</li>
</ul>
<ul><li style="list-style-type: none"><ul><tt><span style="color: #00007f"><li style="list-style-type: none">select var in word1 word2 ... wordN</li>
<li style="list-style-type: none">do</li>
<li style="list-style-type: none">&nbsp; &nbsp;Statement(s) to be executed for every word.</li>
</span></tt><li style="list-style-type: none"><tt><span style="color: #00007f">done</span></tt></li>
</ul>
</li>
<li style="list-style-type: none"></li>
<li style="list-style-type: none">Here var is the name of a variable and word1 to wordN are sequences of characters separated by spaces (words). Each time the for loop executes, the value of the variable var is set to the next word in the list of words, word1 to wordN.</li>
<li style="list-style-type: none"></li>
<li style="list-style-type: none">For every selection a set of commands would be executed with-in the loop. This loop was introduced in ksh and has been adapted into bash. It is not available in sh.</li>
<li style="list-style-type: none"></li>
<li style="list-style-type: none">Here is a simple example to let the user select a drink of choice −</li>
<li style="list-style-type: none"></li>
<li style="list-style-type: none"><ul><tt><span style="color: #00007f"><li style="list-style-type: none">#!/bin/ksh</li>
<li style="list-style-type: none"></li>
<li style="list-style-type: none">select DRINK in tea cofee water juice appe all none</li>
<li style="list-style-type: none">do</li>
<li style="list-style-type: none">&nbsp; &nbsp;case $DRINK in</li>
<li style="list-style-type: none">&nbsp; &nbsp; &nbsp; tea|cofee|water|all) </li>
<li style="list-style-type: none">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo "Go to canteen"</li>
<li style="list-style-type: none">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;;;</li>
<li style="list-style-type: none">&nbsp; &nbsp; &nbsp; juice|appe)</li>
<li style="list-style-type: none">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;echo "Available at home"</li>
<li style="list-style-type: none">&nbsp; &nbsp; &nbsp; ;;</li>
<li style="list-style-type: none">&nbsp; &nbsp; &nbsp; none) </li>
<li style="list-style-type: none">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;break </li>
<li style="list-style-type: none">&nbsp; &nbsp; &nbsp; ;;</li>
<li style="list-style-type: none">&nbsp; &nbsp; &nbsp; *) echo "ERROR: Invalid selection" </li>
<li style="list-style-type: none">&nbsp; &nbsp; &nbsp; ;;</li>
<li style="list-style-type: none">&nbsp; &nbsp;esac</li>
</span></tt><li style="list-style-type: none"><tt><span style="color: #00007f">done</span></tt></li>
</ul>
</li>
<li style="list-style-type: none"></li>
<li style="list-style-type: none">The menu presented by the select loop looks like the following −</li>
<li style="list-style-type: none"></li>
<li style="list-style-type: none"><ul><tt><span style="color: #00007f"><li style="list-style-type: none">$./test.sh</li>
<li style="list-style-type: none">1) tea</li>
<li style="list-style-type: none">2) cofee</li>
<li style="list-style-type: none">3) water</li>
<li style="list-style-type: none">4) juice</li>
<li style="list-style-type: none">5) appe</li>
<li style="list-style-type: none">6) all</li>
<li style="list-style-type: none">7) none</li>
<li style="list-style-type: none">#? juice</li>
<li style="list-style-type: none">Available at home</li>
<li style="list-style-type: none">#? none</li>
</span></tt><li style="list-style-type: none"><tt><span style="color: #00007f">$</span></tt></li>
</ul>
</li>
<li style="list-style-type: none"></li>
<li style="list-style-type: none">You can change the prompt displayed by the select loop by altering the variable PS3 as follows −</li>
<li style="list-style-type: none"></li>
<li style="list-style-type: none"><ul><tt><span style="color: #00007f"><li style="list-style-type: none">$PS3="Please make a selection =&gt; " ; export PS3</li>
<li style="list-style-type: none">$./test.sh</li>
<li style="list-style-type: none">1) tea</li>
<li style="list-style-type: none">2) cofee</li>
<li style="list-style-type: none">3) water</li>
<li style="list-style-type: none">4) juice</li>
<li style="list-style-type: none">5) appe</li>
<li style="list-style-type: none">6) all</li>
<li style="list-style-type: none">7) none</li>
<li style="list-style-type: none">Please make a selection =&gt; juice</li>
<li style="list-style-type: none">Available at home</li>
<li style="list-style-type: none">Please make a selection =&gt; none</li>
</span></tt><li style="list-style-type: none"><tt><span style="color: #00007f">$</span></tt></li>
</ul>
</li>
</ul>
<br/>
<br/>
<ul><li style="list-style-type: none"><b><i>Get output of ls into variable</i></b></li>
<li style="list-style-type: none"><ul><li style="list-style-type: none"></li>
<li style="list-style-type: none"><tt><span style="color: #00007f">myvar=`ls`</span></tt></li>
</ul>
</li>
</ul>
<ul><li style="list-style-type: none"><b><i>Function declaration</i></b></li>
<li style="list-style-type: none"></li>
<li style="list-style-type: none"><ul><tt><span style="color: #00007f"><li style="list-style-type: none">doubleit(){</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none">expr $1 \* 2</li>
</ul>
</li>
<li style="list-style-type: none">}</li>
<li style="list-style-type: none"></li>
</span></tt><li style="list-style-type: none"><tt><span style="color: #00007f">doubleit 3 &#09;# return 6</span></tt></li>
</ul>
</li>
</ul>
<ul><li style="list-style-type: none"><b>Run cmd1; if fails, run cmd2</b></li>
<li style="list-style-type: none"><ul><li style="list-style-type: none"></li>
<li style="list-style-type: none"><tt><span style="color: #00007f">cmd1 || cmd2</span></tt></li>
<li style="list-style-type: none"></li>
</ul>
</li>
<li style="list-style-type: none"><b>Run cmd1; if it works, run cmd2</b></li>
<li style="list-style-type: none"></li>
<li style="list-style-type: none"><ul><li style="list-style-type: none"><tt><span style="color: #00007f">cmd1 &amp;&amp; cmd2</span></tt></li>
</ul>
</li>
</ul>
<ul><li style="list-style-type: none"><b>Test operators</b></li>
<li style="list-style-type: none"></li>
<li style="list-style-type: none"><ul><tt><span style="color: #00007f"><li style="list-style-type: none">if [ "$x" -lt "$y" ]; then</li>
<li style="list-style-type: none"><ul><li style="list-style-type: none"># do something</li>
</ul>
</li>
</span></tt><li style="list-style-type: none"><tt><span style="color: #00007f">fi</span></tt></li>
<li style="list-style-type: none"></li>
</ul>
</li>
<li style="list-style-type: none"><b>Numeric tests</b></li>
<li style="list-style-type: none"><ul><li style="list-style-type: none"></li>
<tt><li style="list-style-type: none"><span style="color: #00007f">lt&#09;</span>less than<span style="color: #00007f"></span></li>
<span style="color: #00007f"><li style="list-style-type: none">gt</li>
<li style="list-style-type: none">eq</li>
<li style="list-style-type: none">ne</li>
<li style="list-style-type: none">ge</li>
</span><li style="list-style-type: none"><span style="color: #00007f">le</span></li>
</tt></ul>
</li>
</ul>
<ul><li style="list-style-type: none"><b>File tests</b></li>
<li style="list-style-type: none"><ul><li style="list-style-type: none"></li>
<tt><li style="list-style-type: none"><span style="color: #00007f">nt&#09;</span>newer than<span style="color: #00007f"></span></li>
<li style="list-style-type: none"><span style="color: #00007f">d&#09;</span>is a directory<span style="color: #00007f"></span></li>
<li style="list-style-type: none"><span style="color: #00007f">f&#09;</span>is a file<span style="color: #00007f"></span></li>
<li style="list-style-type: none"><span style="color: #00007f">x&#09;</span>executable<span style="color: #00007f"></span></li>
<li style="list-style-type: none"><span style="color: #00007f">r&#09;</span>redable<span style="color: #00007f"></span></li>
</tt><li style="list-style-type: none"><tt><span style="color: #00007f">w&#09;</span>writable</tt></li>
</ul>
</li>
</ul>
<ul><li style="list-style-type: none"><b>String tests</b></li>
<li style="list-style-type: none"></li>
<li style="list-style-type: none"><ul><li style="list-style-type: none"><tt><span style="color: #00007f">=</span></tt>&#09;equal to</li>
<li style="list-style-type: none"><tt><span style="color: #00007f">z</span></tt>&#09;zero length</li>
<li style="list-style-type: none"><tt><span style="color: #00007f">n</span></tt>&#09;not zero length</li>
</ul>
</li>
</ul>
<ul><li style="list-style-type: none"><b>Logical test</b></li>
<li style="list-style-type: none"><ul><li style="list-style-type: none"></li>
<tt><span style="color: #00007f"><li style="list-style-type: none">&amp;&amp;</li>
<li style="list-style-type: none">||</li>
</span></tt><li style="list-style-type: none"><tt><span style="color: #00007f">!</span></tt></li>
</ul>
</li>
</ul>
<ul><li style="list-style-type: none"><b>Arguments</b></li>
<li style="list-style-type: none"><ul><li style="list-style-type: none"></li>
<tt><span style="color: #00007f"><li style="list-style-type: none">$0</li>
<li style="list-style-type: none">$1</li>
</span></tt><li style="list-style-type: none"><tt><span style="color: #00007f">...</span></tt></li>
<li style="list-style-type: none"><tt><span style="color: #00007f">$#</span></tt>&#09;no of arguments</li>
<li style="list-style-type: none"><tt><span style="color: #00007f">$*</span></tt>&#09;all arguments</li>
</ul>
</li>
</ul>
<br/>
<b><span style="font-size: 12pt">Variable substitution</span></b><ul><li style="list-style-type: none"></li>
<li style="list-style-type: none"><tt><span style="color: #00007f">${V:-default}</span></tt>&#09;$V, or "default if unset</li>
<li style="list-style-type: none"><tt><span style="color: #00007f">${V:=default}</span></tt>&#09;$V (set to "default" if unset)</li>
<li style="list-style-type: none"><tt><span style="color: #00007f">${V:?err}</span></tt>&#09;$, or "err" if unset</li>
</ul>
<br/>
<b><span style="font-size: 12pt">Preset Varibales</span></b><ul><li style="list-style-type: none"></li>
<li style="list-style-type: none"><tt><span style="color: #00007f">$SHELL</span></tt>&#09;&#09;What shell is running</li>
<li style="list-style-type: none"><tt><span style="color: #00007f">$RANDOM</span></tt>&#09;&#09;Provides random number</li>
<li style="list-style-type: none"><tt><span style="color: #00007f">$SECONDS</span></tt>&#09;Number of seconds from the time the shell is started</li>
<li style="list-style-type: none"><tt><span style="color: #00007f">$$</span></tt>&#09;&#09;PID of current process</li>
<li style="list-style-type: none"><tt><span style="color: #00007f">$?</span></tt>&#09;&#09;Return code from last command</li>
<li style="list-style-type: none"><tt><span style="color: #00007f">$!</span></tt>&#09;&#09;PID of last background cmd</li>
<li style="list-style-type: none"></li>
</ul>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
END</body></html>